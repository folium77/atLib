(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(1),s=n(2),o=n(3),l=n(5),i=n(4),u=n(6),m=n(7),h=n(14),p=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"renderCategories",value:function(e){var t=[],n=0,a=0;return e.forEach(function(e){-1===e.parent?(t[n]=Object.assign(e,{children:[]}),n++,a=0):(t[n-1].children[a]=e,a++)}),t.map(function(e){return m.createElement("li",{class:"col"},m.createElement("a",{href:"?category=".concat(e.id)},e.name),"\uff08",e.count,"\uff09",m.createElement("ul",null,e.children.map(function(e){return m.createElement("li",{class:"col"},m.createElement("a",{href:"?category=".concat(e.id)},e.name),"\uff08",e.count,"\uff09")})))})}},{key:"render",value:function(){var e=this.props.categories;return m.createElement("div",{class:"categories"},this.renderCategories(e))}}]),t}(m.Component),f=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(i.a)(t).call(this,e))).state={books:[],categories:[],value:""},n}return Object(u.a)(t,e),Object(o.a)(t,[{key:"fetchData",value:function(){var e=Object(r.a)(c.a.mark(function e(t){var n,a,r,s,o,l;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=new URLSearchParams(window.location.search),a=n.get("category"),e.next=4,fetch("/api/?get=books&category=".concat(a));case 4:return r=e.sent,e.next=7,r.json();case 7:return s=e.sent,e.next=10,fetch("/api/?get=categories");case 10:return o=e.sent,e.next=13,o.json();case 13:l=e.sent,this.setState({books:s,categories:l});case 15:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.fetchData()}},{key:"doChange",value:function(e){this.setState({value:e.target.value})}},{key:"doSubmit",value:function(){var e=Object(r.a)(c.a.mark(function e(t,n,a,r){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),"post"!==n){e.next=7;break}return e.next=4,fetch("/post/?isbn=".concat(this.state.value));case 4:e.sent,e.next=10;break;case 7:return e.next=9,fetch("/delete/?isbn=".concat(a,"&ndl=").concat(r));case 9:e.sent;case 10:this.fetchData();case 11:case"end":return e.stop()}},e,this)}));return function(t,n,a,c){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state.books;this.state.categories;return m.createElement(m.Fragment,null,m.createElement("form",{onSubmit:function(t){return e.doSubmit(t,"post")}},m.createElement("input",{type:"text",name:"isbn",placeholder:"ISBN\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044",onChange:function(t){return e.doChange(t)},value:this.state.value}),m.createElement("input",{type:"submit"})),m.createElement("div",{class:"books"},m.createElement("ul",null,t.map(function(t,n){return m.createElement("li",{class:"col"},m.createElement("figure",{class:"col-cover"},m.createElement("img",{src:t.cover,alt:t.title})),m.createElement("div",{class:"text-left"},m.createElement("p",{class:"col-title"},t.title),m.createElement("p",{class:"col-class"},"NDC\uff1a",t.ndl,"\uff0f",t.category),m.createElement("p",{class:"col-author"},t.author,m.createElement("span",{class:"col-author__kana"},"\uff0f",t.author_kana)),m.createElement("p",{class:"col-publisher"},"\u51fa\u7248\u793e\uff1a",t.publisher),m.createElement("p",{class:"col-pubdate"},"\u767a\u58f2\u65e5\uff1a",t.pub_date),m.createElement("div",null,m.createElement("form",{onSubmit:function(n){return e.doSubmit(n,"delete",t.isbn,t.ndl)}},m.createElement("button",null,"DELETE")))))}))),m.createElement(p,{categories:this.state.categories}))}}]),t}(m.Component);h.render(m.createElement(f,null),document.getElementById("content"))},9:function(e,t,n){e.exports=n(10)}},[[9,1,2]]]);
//# sourceMappingURL=main.9746c176.chunk.js.map