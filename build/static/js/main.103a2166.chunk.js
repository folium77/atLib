(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,t,n){e.exports=n(11)},11:function(e,t,n){"use strict";n.r(t);var a=n(9),c=n(0),r=n.n(c),s=n(1),o=n(2),l=n(3),i=n(5),u=n(4),h=n(6),m=n(7),p=n(15),f=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"renderCategories",value:function(e){var t=[],n=0,a=0;return e.forEach(function(e){-1===e.parent?(t[n]=Object.assign(e,{children:[]}),n++,a=0):(t[n-1].children[a]=e,a++)}),t.map(function(e){return m.createElement("li",{class:"col"},m.createElement("a",{href:"?category=".concat(e.id)},e.name),"\uff08",e.count,"\uff09",m.createElement("ul",null,e.children.map(function(e){return m.createElement("li",{class:"col"},m.createElement("a",{href:"?category=".concat(e.id)},e.name),"\uff08",e.count,"\uff09")})))})}},{key:"render",value:function(){var e=this.props.categories;return m.createElement("div",{class:"categories"},this.renderCategories(e))}}]),t}(m.Component),b=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={books:[],categories:[],value:""},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"fetchData",value:function(){var e=Object(s.a)(r.a.mark(function e(t){var n,a,c,s,o,l;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=new URLSearchParams(window.location.search),a=n.get("category"),e.next=4,fetch("/api/?get=books&category=".concat(a));case 4:return c=e.sent,e.next=7,c.json();case 7:return s=e.sent,e.next=10,fetch("/api/?get=categories");case 10:return o=e.sent,e.next=13,o.json();case 13:l=e.sent,this.setState({books:s,categories:l});case 15:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.fetchData()}},{key:"shouldComponentUpdate",value:function(e,t){return e.length===t.length}},{key:"doChange",value:function(e){this.setState({value:e.target.value})}},{key:"doSubmit",value:function(){var e=Object(s.a)(r.a.mark(function e(t,n,c,s){var o,l;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),"post"!==n){e.next=11;break}return e.next=4,fetch("/post/?isbn=".concat(this.state.value));case 4:return o=e.sent,e.next=7,o.json();case 7:l=e.sent,this.setState({books:[].concat(Object(a.a)(this.state.books),[l[0]])}),e.next=14;break;case 11:return e.next=13,fetch("/delete/?isbn=".concat(c,"&ndl=").concat(s));case 13:e.sent;case 14:case"end":return e.stop()}},e,this)}));return function(t,n,a,c){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state.books;this.state.categories;return m.createElement(m.Fragment,null,m.createElement("form",{onSubmit:function(t){return e.doSubmit(t,"post")}},m.createElement("input",{type:"text",name:"isbn",placeholder:"ISBN\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044",onChange:function(t){return e.doChange(t)},value:this.state.value}),m.createElement("input",{type:"submit"})),m.createElement("div",{class:"books"},m.createElement("ul",{style:{display:"flex",flexDirection:"column-reverse"}},t.map(function(t,n){return m.createElement("li",{class:"col"},m.createElement("figure",{class:"col-cover"},m.createElement("img",{src:t.cover,alt:t.title})),m.createElement("div",{class:"text-left"},m.createElement("p",{class:"col-title"},t.title),m.createElement("p",{class:"col-class"},"NDC\uff1a",t.ndl,"\uff0f",t.category),m.createElement("p",{class:"col-author"},t.author,m.createElement("span",{class:"col-author__kana"},"\uff0f",t.author_kana)),m.createElement("p",{class:"col-publisher"},"\u51fa\u7248\u793e\uff1a",t.publisher),m.createElement("p",{class:"col-pubdate"},"\u767a\u58f2\u65e5\uff1a",t.pub_date),m.createElement("div",null,m.createElement("form",{onSubmit:function(n){return e.doSubmit(n,"delete",t.isbn,t.ndl)}},m.createElement("button",null,"DELETE")))))}))),m.createElement(f,{categories:this.state.categories}))}}]),t}(m.Component);p.render(m.createElement(b,null),document.getElementById("content"))}},[[10,1,2]]]);
//# sourceMappingURL=main.103a2166.chunk.js.map