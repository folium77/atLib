{"version":3,"sources":["index.js"],"names":["React","require","ReactDOM","Content","props","_this","Object","_Applications_MAMP_htdocs_atlib_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__","this","_Applications_MAMP_htdocs_atlib_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__","_Applications_MAMP_htdocs_atlib_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__","call","state","books","categories","value","fetch","booksRes","json","booksJson","categoriesRes","categoriesJson","setState","fetchData","e","target","fn","preventDefault","concat","isbn","children","ndl","_this2","createElement","Fragment","onSubmit","doSubmit","type","name","placeholder","onChange","doChange","class","map","book","index","src","cover","alt","title","category","author","author_kana","publisher","pub_date","count","Component","render","document","getElementById"],"mappings":"8JAAIA,EAAQC,EAAQ,GAChBC,EAAWD,EAAQ,IAEjBE,cACJ,SAAAA,EAAYC,GAAO,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAL,IACjBE,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAH,GAAAQ,KAAAH,KAAMJ,KACDQ,MAAQ,CACXC,MAAO,GACPC,WAAY,GACZC,MAAO,IALQV,+MAUMW,MAAM,iCAAvBC,kBACkBA,EAASC,qBAA3BC,kBACsBH,MAAM,sCAA5BI,mBACuBA,EAAcF,eAArCG,SAENb,KAAKc,SAAS,CACZT,MAAOM,EACPL,WAAYO,mJAKdb,KAAKe,6CAGGC,GACRhB,KAAKc,SAAS,CAAEP,MAAOS,EAAEC,OAAOV,iFAGlBS,EAAGE,8EACjBF,EAAEG,iBACS,SAAPD,kCACoBV,MAAK,eAAAY,OAAgBpB,KAAKI,MAAMG,oDAEhDc,EAAOL,EAAEC,OAAOK,SAASD,KAAKd,MAC9BgB,EAAMP,EAAEC,OAAOK,SAASC,IAAIhB,gBACZC,MAAK,iBAAAY,OAAkBC,EAAlB,SAAAD,OAA8BG,2BAE3DvB,KAAKe,mJAGC,IAAAS,EAAAxB,KACAK,EAAQL,KAAKI,MAAMC,MACnBC,EAAaN,KAAKI,MAAME,WAC9B,OACEd,EAAAiC,cAACjC,EAAMkC,SAAP,KAGElC,EAAAiC,cAAA,QAAME,SAAU,SAAAX,GAAC,OAAIQ,EAAKI,SAASZ,EAAG,UACpCxB,EAAAiC,cAAA,SAAOI,KAAK,OACVC,KAAK,OACLC,YAAY,6DACZC,SAAU,SAAAhB,GAAC,OAAIQ,EAAKS,SAASjB,IAC7BT,MAAOP,KAAKI,MAAMG,QACpBf,EAAAiC,cAAA,SAAOI,KAAK,YAGdrC,EAAAiC,cAAA,OAAKS,MAAM,SACT1C,EAAAiC,cAAA,UACGpB,EAAM8B,IAAI,SAACC,EAAMC,GAAP,OACT7C,EAAAiC,cAAA,MAAIS,MAAM,OACR1C,EAAAiC,cAAA,UAAQS,MAAM,aACZ1C,EAAAiC,cAAA,OAAKa,IAAKF,EAAKG,MAAOC,IAAKJ,EAAKK,SAElCjD,EAAAiC,cAAA,OAAKS,MAAM,aACT1C,EAAAiC,cAAA,KAAGS,MAAM,aAAaE,EAAKK,OAC3BjD,EAAAiC,cAAA,KAAGS,MAAM,aAAT,YAA0BE,EAAKb,IAA/B,SAAqCa,EAAKM,UAC1ClD,EAAAiC,cAAA,KAAGS,MAAM,cAAcE,EAAKO,OAAOnD,EAAAiC,cAAA,QAAMS,MAAM,oBAAZ,SAAiCE,EAAKQ,cACzEpD,EAAAiC,cAAA,KAAGS,MAAM,iBAAT,2BAA8BE,EAAKS,WACnCrD,EAAAiC,cAAA,KAAGS,MAAM,eAAT,2BAA4BE,EAAKU,UACjCtD,EAAAiC,cAAA,WACEjC,EAAAiC,cAAA,QAAME,SAAU,SAAAX,GAAC,OAAIQ,EAAKI,SAASZ,EAAG,YACpCxB,EAAAiC,cAAA,SAAOI,KAAK,SAASC,KAAK,OAAOvB,MAAO6B,EAAKf,OAC7C7B,EAAAiC,cAAA,SAAOI,KAAK,SAASC,KAAK,MAAMvB,MAAO6B,EAAKb,MAC5C/B,EAAAiC,cAAA,gCAQdjC,EAAAiC,cAAA,OAAKS,MAAM,cACT1C,EAAAiC,cAAA,UACGnB,EAAW6B,IAAI,SAACO,EAAUL,GAAX,OACd7C,EAAAiC,cAAA,MAAIS,MAAM,OAAOQ,EAASZ,KAA1B,SAAiCY,EAASK,MAA1C,sBAtFQvD,EAAMwD,WA+F5BtD,EAASuD,OAAOzD,EAAAiC,cAAC9B,EAAD,MAAauD,SAASC,eAAe","file":"static/js/main.4dc3eaea.chunk.js","sourcesContent":["var React = require('react');\nvar ReactDOM = require('react-dom');\n\nclass Content extends React.Component{\n  constructor(props) {\n    super(props);\n    this.state = {\n      books: [],\n      categories: [],\n      value: ''\n    };\n  }\n\n  async fetchData() {\n    const booksRes = await fetch('/api/?get=books');\n    const booksJson = await booksRes.json();\n    const categoriesRes = await fetch('/api/?get=categories');\n    const categoriesJson = await categoriesRes.json();\n\n    this.setState({\n      books: booksJson,\n      categories: categoriesJson\n    });\n  }\n\n  componentDidMount() {\n    this.fetchData();\n  }\n\n  doChange (e) {\n    this.setState({ value: e.target.value })\n  }\n\n  async doSubmit (e, fn) {\n    e.preventDefault();\n    if (fn === 'post') {\n      const testRes = await fetch(`/post/?isbn=${this.state.value}`);\n    } else {\n      const isbn = e.target.children.isbn.value;\n      const ndl = e.target.children.ndl.value;\n      const testRes = await fetch(`/delete/?isbn=${isbn}&ndl=${ndl}`);\n    }\n    this.fetchData();\n  }\n\n  render(){\n    const books = this.state.books;\n    const categories = this.state.categories;\n    return(\n      <React.Fragment>\n        {/*<Form  books={books} />*/}\n\n        <form onSubmit={e => this.doSubmit(e, 'post')}>\n          <input type=\"text\"\n            name=\"isbn\"\n            placeholder=\"ISBNを入力してください\"\n            onChange={e => this.doChange(e)}\n            value={this.state.value} />\n          <input type=\"submit\" />\n        </form>\n\n        <div class=\"books\">\n          <ul>\n            {books.map((book, index) =>\n              <li class=\"col\">\n                <figure class=\"col-cover\">\n                  <img src={book.cover} alt={book.title} />\n                </figure>\n                <div class=\"text-left\">\n                  <p class=\"col-title\">{book.title}</p>\n                  <p class=\"col-class\">NDC：{book.ndl}／{book.category}</p>\n                  <p class=\"col-author\">{book.author}<span class=\"col-author__kana\">／{book.author_kana}</span></p>\n                  <p class=\"col-publisher\">出版社：{book.publisher}</p>\n                  <p class=\"col-pubdate\">発売日：{book.pub_date}</p>\n                  <div>\n                    <form onSubmit={e => this.doSubmit(e, 'delete')}>\n                      <input type=\"hidden\" name=\"isbn\" value={book.isbn} />\n                      <input type=\"hidden\" name=\"ndl\" value={book.ndl} />\n                      <button>DELETE</button>\n                    </form>\n                  </div>\n                </div>\n              </li>\n            )}\n          </ul>\n        </div>\n        <div class=\"categories\">\n          <ul>\n            {categories.map((category, index) =>\n              <li class=\"col\">{category.name}（{category.count}）</li>\n            )}\n          </ul>\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n\nReactDOM.render(<Content />, document.getElementById(\"content\"))"],"sourceRoot":""}